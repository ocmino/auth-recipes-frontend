const webpack = require("webpack");
const path = require("path");
const WebpackDevServer = require("webpack-dev-server");

const uri = "http://localhost:3001";

const config = {
  entry: ["./test/app", "webpack-dev-server/client?" + uri],
  mode: "development",
  output: {
    filename: "bundle.js",
    publicPath: "./test",
    path: __dirname
  },
  module: { rules: [] },
  resolve: {
    extensions: [".js"],
    modules: [path.resolve("."), path.resolve("./node_modules")]
  }
};

new WebpackDevServer(webpack(config), {
  publicPath: ".",
  hot: false,
  historyApiFallback: false,
  overlay: true,
  watchOptions: { poll: true },
  contentBase: "./test"
}).listen(3001, "localhost");
